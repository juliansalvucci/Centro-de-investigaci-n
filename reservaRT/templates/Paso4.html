{% load static %}

<link 
    rel="stylesheet"
    type="text/css"
    href="{% static 'CentroDeInvestigacion/css/bootstrap.css' %}"
/>
<link rel="stylesheet" href="{% static 'fullcalendar/lib/main.css' %}">


<div class="container">
    <head>
        <h1>Seleccione un Turno</h1>
        <span>Paso 4 de 11</span>
        <hr>
    </head>
    <body>
        <div class="row">
            <form action="../tomarSeleccionTurno/" method="POST">
                {% csrf_token %}
    
                <label for="turnoSeleccionado" class="label-readonly mt-2">Recurso:</label>
                <select name="turnoSeleccionado" class="form-select mt-1 mb-4" required>
                    {% for turnoDeRecursoTecnologico in turnosDeRecursoTecnologico %}
                    <option value="{{turnoDeRecursoTecnologico.diaSemana}}">{{turnoDeRecursoTecnologico.fechaHoraInicio}}</option>
                    {% endfor %}
                </select>
            
                <div class="submit-container">
                    <input type="submit" value="Seleccionar" class="btn btn-primary mb-2">
                </div>
            </form>
        </div>
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-8">
                        <strong class="card-title">Turnos disponibles</strong>
        
                    </div>
                </div>
            </div>
            <div id="calendar" class="card" style="padding: 20px">
        
            </div>
        </div>
    </body>
</div>


<script src="{% static 'fullcalendar/lib/main.js' %}"></script>

<script>
    document.addEventListener('DOMContentLoaded', function(){
        var calendarUI = document.getElementById('calendar')
        var calendar = new FullCalendar.Calendar(calendarUI,{
            events: [
                {% for turnoDeRecursoTecnologico in turnosDeRecursoTecnologico %}
                    {
                        title: "{{ turnoDeRecursoTecnologico.estado }}",
                        start: '{{ turnoDeRecursoTecnologico.fechaHoraInicio }}',
                        end:   '{{ turnoDeRecursoTecnologico.fechaHoraFin }}'
                    },
                {% endfor %}
            ]
        });
        calendar.render()
    });
</script>

